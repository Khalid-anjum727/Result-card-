<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result Card Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@tailwindcss/browser@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <style>
        /* Existing styles ... */

        /* Improved UI Styles */
        .container {
            max-width: 900px; /* Limit container width for better readability */
            margin: 2rem auto; /* Add more top/bottom margin */
            padding: 2rem;
            border-radius: 0.5rem;
        }

        .school-info {
            text-align: center; /* Center school information */
            margin-bottom: 1.5rem;
        }

        .school-info h2 {
            font-size: 2.5rem; /* Larger school name */
            margin-bottom: 0.5rem;
        }

        .student-photo-display {
            border-radius: 50%; /* Ensure perfect circle for photo */
            overflow: hidden; /* Clip image to the circle */
            width: 120px;
            height: 120px;
            margin-right: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        }

        .student-photo-display img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensure image covers the circle */
        }

        .student-info h3 {
            font-size: 1.8rem;
            margin-bottom: 0.3rem;
            color: var(--heading-color);
        }

        .student-info p {
            font-size: 1.1rem;
            margin-bottom: 0.2rem;
        }

        .result-card h2.card-title {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            text-align: center;
            color: var(--primary-color); /* Use primary color for emphasis */
        }

        .table-heading th {
            background-color: var(--secondary-color);
            color: var(--text-color);
            font-weight: 600; /* Make table headers bolder */
            padding: 0.75rem 1rem; /* Adjust padding */
        }

        .table-data td {
            padding: 0.6rem 1rem;
        }

        .total-marks-section,
        .percentage-section,
        .grade-section,
        .feedback-section {
            margin-top: 1rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--heading-color);
        }

        .final-feedback-display {
            font-size: 1.2rem;
            font-style: italic; /* Add emphasis to final feedback */
        }

        .print-download-btn {
            padding: 0.75rem 1.5rem; /* Adjust button padding */
            font-size: 1.1rem;
        }

        /* Subject Row Improvements */
        .subject-row {
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            margin-bottom: 1rem;
            background-color: var(--card-background-color); /* Ensure consistent background */
        }

        .subject-row h3 {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
            color: var(--heading-color);
        }

        .remove-subject {
            margin-top: 0.5rem;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 font-inter p-6">
    <div class="container mx-auto rounded-lg ">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-semibold text-blue-600 ">Result Card Generator</h1>
            <button id="theme-switcher" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline text-sm">Theme</button>
        </div>
        <div id="input-form" class="mb-8">
            <h2 class="text-2xl font-semibold mb-6">Student Information</h2>
            <form id="student-form" class="space-y-4">
                <div>
                    <label for="school-name" class="block text-sm font-bold mb-2">School Name:</label>
                    <input type="text" id="school-name" name="school-name" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                </div>
                <div>
                    <label for="school-logo" class="block text-sm font-bold mb-2">School Logo:</label>
                    <input type="file" id="school-logo" name="school-logo" accept="image/*" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div>
                    <label for="student-photo" class="block text-sm font-bold mb-2">Student Photo:</label>
                    <input type="file" id="student-photo" name="student-photo" accept="image/*" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div>
                    <label for="class" class="block text-sm font-bold mb-2">Class:</label>
                    <input type="text" id="class" name="class" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                </div>
                <div>
                    <label for="student-name" class="block text-sm font-bold mb-2">Student Name:</label>
                    <input type="text" id="student-name" name="student-name" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                </div>
                <div>
                    <label for="roll-number" class="block text-sm font-bold mb-2">Roll Number:</label>
                    <input type="text" id="roll-number" name="roll-number" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                </div>
                <div id="subjects-container" class="mt-4">
                    <h3 class="text-lg font-semibold mb-4">Subjects and Marks</h3>
                    <div class="subject-row mb-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-bold mb-2">Subject 1:</label>
                                <input type="text" name="subject[]" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">Marks:</label>
                                <input type="number" name="marks[]" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" id="add-subject" class="btn-primary font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Add Subject</button>
                <div class="flex justify-center mt-6">
                    <button type="button" id="generate-result" class="btn-primary font-bold py-3 px-6 rounded focus:outline-none focus:shadow-outline text-lg">Generate Result</button>
                </div>
            </form>
        </div>
        <div id="result-card" class="hidden p-8 ">
            <div class="school-info">
                <div id="school-logo-display" class="mx-auto mb-2" style="max-width: 120px; max-height: 120px;">
                    <img id="logo-img" src="" alt="School Logo" style="max-width: 100%; max-height: 100%; border-radius: 5px;">
                </div>
                <h2 id="school-name-display" class="text-2xl font-semibold mb-2">School Name</h2>
            </div>
            <div class="flex items-center mb-4">
                <div id="student-photo-display" class="mr-4">
                    <img id="photo-img" src="" alt="Student Photo">
                </div>
                <div class="student-info">
                    <h3 id="class-display" class="text-xl font-semibold mb-2">Class: </h3>
                    <p id="student-name-display" class="text-lg "><strong>Student Name:</strong> </p>
                    <p id="roll-number-display" class="text-lg "><strong>Roll Number:</strong> </p>
                </div>
            </div>
            <h2 class="card-title mb-4 text-center">Result Card</h2>
            <table class="min-w-full leading-normal rounded-lg overflow-hidden">
                <thead class="table-heading">
                    <tr>
                        <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider">Subject</th>
                        <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider">Marks</th>
                        <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider">Grade</th>
                        <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider">Feedback</th>
                    </tr>
                </thead>
                <tbody id="marks-display" class="bg-white">
                    </tbody>
            </table>
            <div class="mt-6 text-center">
                <p id="total-marks-display" class="total-marks-section">Total Marks: </p>
                <p id="percentage-display" class="percentage-section">Percentage: </p>
                <p id="grade-display" class="grade-section">Overall Grade: </p>
                <p id="final-feedback-display" class="feedback-section">Final Feedback: </p>
            </div>
            <div class="flex justify-center mt-8 space-x-4 no-print">
                <button id="print-result" class="print-download-btn font-bold py-3 px-6 rounded focus:outline-none focus:shadow-outline text-lg">Print Result</button>
                <button id="download-pdf" class="print-download-btn font-bold py-3 px-6 rounded focus:outline-none focus:shadow-outline text-lg">Download as PDF</button>
            </div>
        </div>
    </div>
    <script>
        const studentForm = document.getElementById('student-form');
        const generateResultButton = document.getElementById('generate-result');
        const resultCard = document.getElementById('result-card');
        const marksDisplay = document.getElementById('marks-display');
        const addSubjectButton = document.getElementById('add-subject');
        const subjectsContainer = document.getElementById('subjects-container');
        const printButton = document.getElementById('print-result');
        const downloadPdfButton = document.getElementById('download-pdf');
        const themeSwitcher = document.getElementById('theme-switcher');
        // Get display elements
        const schoolNameDisplay = document.getElementById('school-name-display');
        const schoolLogoDisplay = document.getElementById('school-logo-display');
        const studentPhotoDisplay = document.getElementById('student-photo-display');
        const classNameDisplay = document.getElementById('class-display');
        const studentNameDisplay = document.getElementById('student-name-display');
        const rollNumberDisplay = document.getElementById('roll-number-display');
        const totalMarksDisplay = document.getElementById('total-marks-display');
        const percentageDisplay = document.getElementById('percentage-display');
        const gradeDisplay = document.getElementById('grade-display');
        const finalFeedbackDisplay = document.getElementById('final-feedback-display');
        let subjectCount = 1;
        let currentTheme = 'light';

        addSubjectButton.addEventListener('click', () => {
            subjectCount++;
            const subjectRow = document.createElement('div');
            subjectRow.className = 'subject-row mb-4';
            subjectRow.innerHTML = `
                <h3 class="text-lg font-semibold mb-2">Subject ${subjectCount}</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-bold mb-2">Subject:</label>
                        <input type="text" name="subject[]" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Marks:</label>
                        <input type="number" name="marks[]" class="form-control shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                </div>
                <button type="button" class="remove-subject bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline text-xs mt-2">Remove</button>
            `;
            subjectsContainer.appendChild(subjectRow);
            const removeButton = subjectRow.querySelector('.remove-subject');
            removeButton.addEventListener('click', () => {
                subjectRow.remove();
            });
        });

        function calculateGrade(marks) {
            if (marks >= 90) return 'A+';
            else if (marks >= 80) return 'A';
            else if (marks >= 70) return 'B';
            else if (marks >= 60) return 'C';
            else if (marks >= 50) return 'D';
            else return 'F';
        }

        function getFeedback(marks) {
            if (marks >= 90) return 'Outstanding!';
            else if (marks >= 80) return 'Excellent work!';
            else if (marks >= 70) return 'Very good.';
            else if (marks >= 60) return 'Satisf
